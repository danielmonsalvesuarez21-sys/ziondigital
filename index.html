<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZionDigital</title>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/topojson.v1.min.js"></script>
    
    <style>
        body {
            margin: 0;
            background-color: #000;
            overflow-x: hidden;
            font-family: 'Arial Black', Gadget, sans-serif;
            color: #00ffcc;
            cursor: none;
        }

        /* Oculta el cursor neón en dispositivos táctiles */
        @media (pointer: coarse) {
            #cursor {
                display: none !important;
            }
            body {
                cursor: default;
            }
        }

        #cursor {
            position: fixed;
            top: 0;
            left: 0;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: #00ffcc;
            box-shadow: 0 0 10px #00ffcc, 0 0 20px #00ffcc;
            pointer-events: none;
            z-index: 9999;
            transition: transform 0.05s ease;
        }

        /* --- Estilos del Loader --- */
        #loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 999;
        }

        #porcentaje {
            font-size: 2em;
            text-shadow: 0 0 10px #00ffcc;
        }

        #barra {
            width: 80%;
            max-width: 600px;
            height: 30px;
            background-color: #111;
            border: 2px solid #00ffcc;
            border-radius: 20px;
            box-shadow: 0 0 15px #00ffcc;
            margin: 20px auto;
            overflow: hidden;
        }

        #progreso {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #00ffcc, #00cc99);
            box-shadow: 0 0 10px #00ffcc;
            transition: width 0.2s ease;
        }
        /* -------------------------- */

        /* --- Estilos del Contenido Principal --- */
        h1 {
            text-align: center;
            margin: 20px 0 10px;
            font-size: 3em; /* Tamaño del título */
            font-weight: bold; /* ZIONDIGITAL en negrita */
            text-shadow: 0 0 10px #00ffcc;
            display: none;
        }

        #eslogan {
            text-align: center;
            font-size: 1em;
            margin-bottom: 20px;
            color: #00ffcc;
            text-shadow: 0 0 8px #00ffcc;
            display: none;
        }

        .nav {
            text-align: center;
            margin-bottom: 30px;
            display: none;
        }

        .nav a {
            display: inline-block;
            margin: 5px 10px;
            padding: 10px 18px;
            background-color: #111;
            color: #00ffcc;
            text-decoration: none;
            border: 2px solid #00ffcc;
            border-radius: 8px;
            font-size: 0.9em;
            transition: all 0.3s ease;
            box-shadow: 0 0 5px #00ffcc;
        }

        .nav a:hover {
            background-color: #00ffcc;
            color: #000;
            transform: scale(1.1);
            box-shadow: 0 0 20px #00ffcc, 0 0 40px #00ffcc;
        }

        svg {
            display: block;
            margin: auto;
            background-color: transparent;
            display: none;
        }

        #descripcion {
            max-width: 800px;
            margin: 10px auto 30px;
            padding: 20px;
            font-size: 1em; /* Más pequeño */
            text-align: justify; /* Justificado */
            color: #00ffcc;
            text-shadow: 0 0 8px #00ffcc;
            font-family: 'Arial Black', Gadget, sans-serif;
            display: none;
        }

        /* --- Media Query para Responsividad --- */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.5em; 
            }

            .nav a {
                display: block;
                width: 80%; 
                margin: 10px auto;
            }

            svg {
                width: 100%; 
                height: auto; 
            }

            #descripcion {
                font-size: 0.9em;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div id="cursor"></div>

    <div id="loader">
        <div id="porcentaje">1%</div>
        <div id="barra"><div id="progreso"></div></div>
        <div id="texto">Conectando a Zion...</div>
    </div>

    <h1 id="titulo">ZIONDIGITAL</h1>
    <div id="eslogan">“Soluciones digitales a tu medida”</div>

    <div class="nav" id="menu">
        <a href="https://danielmonsalve5.wixsite.com/dams" target="_blank">INICIO</a>
        <a href="https://danielmonsalve5.wixsite.com/dams/proyectos" target="_blank">PERFILES</a>
        <a href="https://danielmonsalve5.wixsite.com/dams/publicaciones" target="_blank">SERVICIOS</a>
        <a href="https://danielmonsalve5.wixsite.com/dams/informacion" target="_blank">CONTACTO</a>
    </div>

    <svg id="globo"></svg>

    <div id="descripcion">
        Damos todo tipo de servicios relacionados con la informática, desde los más comunes, como el mantenimiento y reparación de equipos, hasta los más complejos y especializados, como el desarrollo de aplicaciones software o la construcción de sitios Web.
    </div>

   <script>
    // --- CÓDIGO DEL LOADER ---
    let carga = 1;
    const porcentaje = document.getElementById('porcentaje');
    const progreso = document.getElementById('progreso');
    const loader = document.getElementById('loader');
    const titulo = document.getElementById('titulo');
    const eslogan = document.getElementById('eslogan');
    const menu = document.getElementById('menu');
    const globo = document.getElementById('globo');
    const descripcion = document.getElementById('descripcion');

    // Mantenemos la lógica del loader
    const intervalo = setInterval(() => {
        if (carga > 100) {
            clearInterval(intervalo);
            loader.style.display = 'none';
            titulo.style.display = 'block';
            eslogan.style.display = 'block';
            menu.style.display = 'block';
            globo.style.display = 'block'; // Aseguramos que el SVG sea visible
            descripcion.style.display = 'block';
            
            // Llama a la inicialización del globo una vez que el loader desaparece
            if (!document.isGlobeInitialized) {
                initializeGlobe();
            }

        } else {
            progreso.style.width = carga + '%';
            porcentaje.textContent = carga + '%';
            carga++;
        }
    }, 50);

    // --- CÓDIGO DEL GLOBO GIRATORIO Y RESPONSIVO (D3.js) ---
    let svg, projection, path, globe, graticulePath;

    function updateGlobeSize() {
        const containerWidth = document.getElementById('globo').clientWidth;
        const calculatedHeight = containerWidth * 0.75; 

        svg.attr('width', containerWidth)
           .attr('height', calculatedHeight);

        // Reajusta la escala y la posición de la proyección
        projection.scale(containerWidth / 2.7) 
            .translate([containerWidth / 2, calculatedHeight / 2]);

        // Redibujar
        graticulePath.attr("d", path);
        globe.attr("d", path);
    }

    function animate() {
        // Rotar el globo
        projection.rotate([Date.now() * 0.02, -15]); 
        
        // Redibujar en cada cuadro
        globe.attr("d", path);
        graticulePath.attr("d", path);
        
        requestAnimationFrame(animate); 
    }

    function initializeGlobe() {
        if (document.isGlobeInitialized) return; // Evita doble inicialización

        svg = d3.select("#globo");
        projection = d3.geoOrthographic().clipAngle(90);
        path = d3.geoPath().projection(projection);

        // Elemento para el fondo (continentes)
        globe = svg.append("path").attr("fill", "#00ffcc");
        
        // Graticule (líneas de latitud/longitud)
        const graticule = d3.geoGraticule();
        graticulePath = svg.append("path")
            .datum(graticule)
            .attr("fill", "none")
            .attr("stroke", "#00ffcc")
            .attr("stroke-width", 0.5)
            .attr("opacity", 0.5)
            .attr("d", path);

        // Cargar datos del mapa
        d3.json("https://unpkg.com/world-atlas@1/world/110m.json", function(error, world) {
            if (error) {
                console.error("Error al cargar los datos del mapa:", error);
                return;
            }
            // Dibujar los continentes
            globe.datum(topojson.feature(world, world.objects.land))
                 .attr("d", path);
                 
            // Inicializar tamaño y rotación
            updateGlobeSize();
            animate(); 
            document.isGlobeInitialized = true;
        });

        // Ajustar el tamaño del globo al redimensionar la ventana
        window.addEventListener('resize', updateGlobeSize);
    }

    // --- CÓDIGO DEL CURSOR NEÓN ---
    const cursor = document.getElementById('cursor');
    document.addEventListener('mousemove', e => {
        if (!('ontouchstart' in window)) {
            cursor.style.transform = `translate(${e.clientX - 7}px, ${e.clientY - 7}px)`;
        }
    });
</script>
</body>

</html>
